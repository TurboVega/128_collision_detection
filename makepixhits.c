// File: makepixhits.c
// Purpose: Make table of hit decisions based on sprite coordinates
// Copyright (c) 2023 by Curtis Whitley

#include <stdio.h>

/*
    Sprites are 16x16 pixels, so the potential area within which they could overlap
    is nearly 32x32 pixels (31x31 to be precise), taking into account that the
    worst case is the trailing edge of sprite 1 overlapping the leading edge of
    sprite 2. If this happens in both X and Y, the sprites overlap in corners.
    The best case is that the 2 sprites overlap completely, meaning that their
    leading edges are aligned in both X and Y.

    This program determines whether the sprites overlap for each combination of
    coordinates in X and Y, ranging from 0 to 15. The output is a table of
    decision results (simple flags).
*/

const unsigned char sprite_bitmap[16][16] =
{
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x06,0x06,0x01,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x01,0x06,0x06,0x06,0x06,0x01,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x01,0x06,0x06,0x06,0x06,0x06,0x06,0x01,0x00,0x00,0x00,0x00,

    0x00,0x00,0x00,0x00,0x01,0x06,0x06,0x06,0x06,0x06,0x06,0x01,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x01,0x06,0x06,0x06,0x06,0x01,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x06,0x06,0x01,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};

void main() {
    printf("sprite_hit_decision:\n");
    for (int y1 = 0; y1 < 16; y1++) {
        for (int x1 = 0; x1 < 16; x1++) {
            unsigned char flag = 0;
            for (int y2 = 0; y2 < 16; y2++) {
                int y = y1 + y2;
                if (y < 16) {
                    for (int x2 = 0; x2 < 16; x2++) {
                        int x = x1 + x2;
                        if (x < 16) {
                            if (sprite_bitmap[y][x] && sprite_bitmap[y2][x2]) {
                                flag = 1;
                                break;
                            }
                        }
                    }
                }
            }
            printf("    .byte    %i    ; x1: %i, y1: %i\n", flag, x1, y1);
        }
    }
}
